{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"API_BASE\", {\n    enumerable: true,\n    get: function () {\n      return API_BASE;\n    }\n  });\n  exports.apiGet = apiGet;\n  exports.apiPost = apiPost;\n  exports.followUser = followUser;\n  exports.unfollowUser = unfollowUser;\n  exports.getFollowStatus = getFollowStatus;\n  exports.presenceWatch = presenceWatch;\n  exports.presenceLeave = presenceLeave;\n  exports.getEventPresence = getEventPresence;\n  exports.attachPlayback = attachPlayback;\n  const BASE = process.env.EXPO_BACKEND_URL || process.env.EXPO_PUBLIC_BACKEND_URL || \"\";\n  const API_BASE = BASE.endsWith(\"/\") ? BASE.slice(0, -1) : BASE;\n  function buildUrl(path) {\n    if (!path.startsWith(\"/\")) path = `/${path}`;\n    return `${API_BASE}${path}`;\n  }\n  async function apiGet(path) {\n    const res = await fetch(buildUrl(path));\n    if (!res.ok) throw new Error(`${res.status}`);\n    return res.json();\n  }\n  async function apiPost(path, body, init) {\n    const res = await fetch(buildUrl(path), {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(init?.headers || {})\n      },\n      body: body ? JSON.stringify(body) : undefined,\n      ...(init || {})\n    });\n    if (!res.ok) throw new Error(`${res.status}`);\n    return res.json();\n  }\n\n  // Social graph\n  async function followUser(followerId, followingId) {\n    return apiPost(\"/api/follows\", {\n      follower_id: followerId,\n      following_id: followingId,\n      action: \"follow\"\n    });\n  }\n  async function unfollowUser(followerId, followingId) {\n    return apiPost(\"/api/follows\", {\n      follower_id: followerId,\n      following_id: followingId,\n      action: \"unfollow\"\n    });\n  }\n  async function getFollowStatus(followerId, followingId) {\n    return apiGet(`/api/follows/status?follower_id=${encodeURIComponent(followerId)}&following_id=${encodeURIComponent(followingId)}`);\n  }\n\n  // Presence\n  async function presenceWatch(userId, eventId) {\n    return apiPost(\"/api/presence/watch\", {\n      user_id: userId,\n      event_id: eventId\n    });\n  }\n  async function presenceLeave(userId, eventId) {\n    return apiPost(\"/api/presence/leave\", {\n      user_id: userId,\n      event_id: eventId\n    });\n  }\n  async function getEventPresence(eventId, userId) {\n    const q = userId ? `?user_id=${encodeURIComponent(userId)}` : \"\";\n    return apiGet(`/api/events/${eventId}/presence${q}`);\n  }\n\n  // Streams helper\n  async function attachPlayback(streamId, playbackUrl) {\n    return apiPost(`/api/streams/${streamId}/attach_playback`, undefined, {\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      body: JSON.stringify({\n        playback_url: playbackUrl\n      })\n    });\n  }\n});","lineCount":95,"map":[[7,2,2,0,"Object"],[7,8,2,0],[7,9,2,0,"defineProperty"],[7,23,2,0],[7,24,2,0,"exports"],[7,31,2,0],[8,4,2,0,"enumerable"],[8,14,2,0],[9,4,2,0,"get"],[9,7,2,0],[9,18,2,0,"get"],[9,19,2,0],[10,6,2,0],[10,13,2,0,"API_BASE"],[10,21,2,0],[11,4,2,0],[12,2,2,0],[13,2,9,0,"exports"],[13,9,9,0],[13,10,9,0,"apiGet"],[13,16,9,0],[13,19,9,0,"apiGet"],[13,25,9,0],[14,2,15,0,"exports"],[14,9,15,0],[14,10,15,0,"apiPost"],[14,17,15,0],[14,20,15,0,"apiPost"],[14,27,15,0],[15,2,27,0,"exports"],[15,9,27,0],[15,10,27,0,"followUser"],[15,20,27,0],[15,23,27,0,"followUser"],[15,33,27,0],[16,2,30,0,"exports"],[16,9,30,0],[16,10,30,0,"unfollowUser"],[16,22,30,0],[16,25,30,0,"unfollowUser"],[16,37,30,0],[17,2,33,0,"exports"],[17,9,33,0],[17,10,33,0,"getFollowStatus"],[17,25,33,0],[17,28,33,0,"getFollowStatus"],[17,43,33,0],[18,2,38,0,"exports"],[18,9,38,0],[18,10,38,0,"presenceWatch"],[18,23,38,0],[18,26,38,0,"presenceWatch"],[18,39,38,0],[19,2,39,0,"exports"],[19,9,39,0],[19,10,39,0,"presenceLeave"],[19,23,39,0],[19,26,39,0,"presenceLeave"],[19,39,39,0],[20,2,40,0,"exports"],[20,9,40,0],[20,10,40,0,"getEventPresence"],[20,26,40,0],[20,29,40,0,"getEventPresence"],[20,45,40,0],[21,2,46,0,"exports"],[21,9,46,0],[21,10,46,0,"attachPlayback"],[21,24,46,0],[21,27,46,0,"attachPlayback"],[21,41,46,0],[22,2,1,0],[22,8,1,6,"BASE"],[22,12,1,10],[22,15,1,13,"process"],[22,22,1,20],[22,23,1,21,"env"],[22,26,1,24],[22,27,1,25,"EXPO_BACKEND_URL"],[22,43,1,41],[22,47,1,45,"process"],[22,54,1,52],[22,55,1,53,"env"],[22,58,1,56],[22,59,1,57,"EXPO_PUBLIC_BACKEND_URL"],[22,82,1,80],[22,86,1,84],[22,88,1,86],[23,2,2,7],[23,8,2,13,"API_BASE"],[23,16,2,21],[23,19,2,24,"BASE"],[23,23,2,28],[23,24,2,29,"endsWith"],[23,32,2,37],[23,33,2,38],[23,36,2,41],[23,37,2,42],[23,40,2,45,"BASE"],[23,44,2,49],[23,45,2,50,"slice"],[23,50,2,55],[23,51,2,56],[23,52,2,57],[23,54,2,59],[23,55,2,60],[23,56,2,61],[23,57,2,62],[23,60,2,65,"BASE"],[23,64,2,69],[24,2,4,0],[24,11,4,9,"buildUrl"],[24,19,4,17,"buildUrl"],[24,20,4,18,"path"],[24,24,4,30],[24,26,4,32],[25,4,5,2],[25,8,5,6],[25,9,5,7,"path"],[25,13,5,11],[25,14,5,12,"startsWith"],[25,24,5,22],[25,25,5,23],[25,28,5,26],[25,29,5,27],[25,31,5,29,"path"],[25,35,5,33],[25,38,5,36],[25,42,5,40,"path"],[25,46,5,44],[25,48,5,46],[26,4,6,2],[26,11,6,9],[26,14,6,12,"API_BASE"],[26,22,6,20],[26,25,6,23,"path"],[26,29,6,27],[26,31,6,29],[27,2,7,0],[28,2,9,7],[28,17,9,22,"apiGet"],[28,23,9,28,"apiGet"],[28,24,9,32,"path"],[28,28,9,44],[28,30,9,58],[29,4,10,2],[29,10,10,8,"res"],[29,13,10,11],[29,16,10,14],[29,22,10,20,"fetch"],[29,27,10,25],[29,28,10,26,"buildUrl"],[29,36,10,34],[29,37,10,35,"path"],[29,41,10,39],[29,42,10,40],[29,43,10,41],[30,4,11,2],[30,8,11,6],[30,9,11,7,"res"],[30,12,11,10],[30,13,11,11,"ok"],[30,15,11,13],[30,17,11,15],[30,23,11,21],[30,27,11,25,"Error"],[30,32,11,30],[30,33,11,31],[30,36,11,34,"res"],[30,39,11,37],[30,40,11,38,"status"],[30,46,11,44],[30,48,11,46],[30,49,11,47],[31,4,12,2],[31,11,12,9,"res"],[31,14,12,12],[31,15,12,13,"json"],[31,19,12,17],[31,20,12,18],[31,21,12,19],[32,2,13,0],[33,2,15,7],[33,17,15,22,"apiPost"],[33,24,15,29,"apiPost"],[33,25,15,39,"path"],[33,29,15,51],[33,31,15,53,"body"],[33,35,15,63],[33,37,15,65,"init"],[33,41,15,83],[33,43,15,97],[34,4,16,2],[34,10,16,8,"res"],[34,13,16,11],[34,16,16,14],[34,22,16,20,"fetch"],[34,27,16,25],[34,28,16,26,"buildUrl"],[34,36,16,34],[34,37,16,35,"path"],[34,41,16,39],[34,42,16,40],[34,44,16,42],[35,6,17,4,"method"],[35,12,17,10],[35,14,17,12],[35,20,17,18],[36,6,18,4,"headers"],[36,13,18,11],[36,15,18,13],[37,8,18,15],[37,22,18,29],[37,24,18,31],[37,42,18,49],[38,8,18,51],[38,12,18,55,"init"],[38,16,18,59],[38,18,18,61,"headers"],[38,25,18,68],[38,29,18,72],[38,30,18,73],[38,31,18,74],[39,6,18,76],[39,7,18,77],[40,6,19,4,"body"],[40,10,19,8],[40,12,19,10,"body"],[40,16,19,14],[40,19,19,17,"JSON"],[40,23,19,21],[40,24,19,22,"stringify"],[40,33,19,31],[40,34,19,32,"body"],[40,38,19,36],[40,39,19,37],[40,42,19,40,"undefined"],[40,51,19,49],[41,6,20,4],[41,10,20,8,"init"],[41,14,20,12],[41,18,20,16],[41,19,20,17],[41,20,20,18],[42,4,21,2],[42,5,21,3],[42,6,21,4],[43,4,22,2],[43,8,22,6],[43,9,22,7,"res"],[43,12,22,10],[43,13,22,11,"ok"],[43,15,22,13],[43,17,22,15],[43,23,22,21],[43,27,22,25,"Error"],[43,32,22,30],[43,33,22,31],[43,36,22,34,"res"],[43,39,22,37],[43,40,22,38,"status"],[43,46,22,44],[43,48,22,46],[43,49,22,47],[44,4,23,2],[44,11,23,9,"res"],[44,14,23,12],[44,15,23,13,"json"],[44,19,23,17],[44,20,23,18],[44,21,23,19],[45,2,24,0],[47,2,26,0],[48,2,27,7],[48,17,27,22,"followUser"],[48,27,27,32,"followUser"],[48,28,27,33,"followerId"],[48,38,27,51],[48,40,27,53,"followingId"],[48,51,27,72],[48,53,27,74],[49,4,28,2],[49,11,28,9,"apiPost"],[49,18,28,16],[49,19,28,17],[49,33,28,31],[49,35,28,33],[50,6,28,35,"follower_id"],[50,17,28,46],[50,19,28,48,"followerId"],[50,29,28,58],[51,6,28,60,"following_id"],[51,18,28,72],[51,20,28,74,"followingId"],[51,31,28,85],[52,6,28,87,"action"],[52,12,28,93],[52,14,28,95],[53,4,28,104],[53,5,28,105],[53,6,28,106],[54,2,29,0],[55,2,30,7],[55,17,30,22,"unfollowUser"],[55,29,30,34,"unfollowUser"],[55,30,30,35,"followerId"],[55,40,30,53],[55,42,30,55,"followingId"],[55,53,30,74],[55,55,30,76],[56,4,31,2],[56,11,31,9,"apiPost"],[56,18,31,16],[56,19,31,17],[56,33,31,31],[56,35,31,33],[57,6,31,35,"follower_id"],[57,17,31,46],[57,19,31,48,"followerId"],[57,29,31,58],[58,6,31,60,"following_id"],[58,18,31,72],[58,20,31,74,"followingId"],[58,31,31,85],[59,6,31,87,"action"],[59,12,31,93],[59,14,31,95],[60,4,31,106],[60,5,31,107],[60,6,31,108],[61,2,32,0],[62,2,33,7],[62,17,33,22,"getFollowStatus"],[62,32,33,37,"getFollowStatus"],[62,33,33,38,"followerId"],[62,43,33,56],[62,45,33,58,"followingId"],[62,56,33,77],[62,58,33,79],[63,4,34,2],[63,11,34,9,"apiGet"],[63,17,34,15],[63,18,34,40],[63,53,34,75,"encodeURIComponent"],[63,71,34,93],[63,72,34,94,"followerId"],[63,82,34,104],[63,83,34,105],[63,100,34,122,"encodeURIComponent"],[63,118,34,140],[63,119,34,141,"followingId"],[63,130,34,152],[63,131,34,153],[63,133,34,155],[63,134,34,156],[64,2,35,0],[66,2,37,0],[67,2,38,7],[67,17,38,22,"presenceWatch"],[67,30,38,35,"presenceWatch"],[67,31,38,36,"userId"],[67,37,38,50],[67,39,38,52,"eventId"],[67,46,38,67],[67,48,38,69],[68,4,38,71],[68,11,38,78,"apiPost"],[68,18,38,85],[68,19,38,86],[68,40,38,107],[68,42,38,109],[69,6,38,111,"user_id"],[69,13,38,118],[69,15,38,120,"userId"],[69,21,38,126],[70,6,38,128,"event_id"],[70,14,38,136],[70,16,38,138,"eventId"],[71,4,38,146],[71,5,38,147],[71,6,38,148],[72,2,38,150],[73,2,39,7],[73,17,39,22,"presenceLeave"],[73,30,39,35,"presenceLeave"],[73,31,39,36,"userId"],[73,37,39,50],[73,39,39,52,"eventId"],[73,46,39,67],[73,48,39,69],[74,4,39,71],[74,11,39,78,"apiPost"],[74,18,39,85],[74,19,39,86],[74,40,39,107],[74,42,39,109],[75,6,39,111,"user_id"],[75,13,39,118],[75,15,39,120,"userId"],[75,21,39,126],[76,6,39,128,"event_id"],[76,14,39,136],[76,16,39,138,"eventId"],[77,4,39,146],[77,5,39,147],[77,6,39,148],[78,2,39,150],[79,2,40,7],[79,17,40,22,"getEventPresence"],[79,33,40,38,"getEventPresence"],[79,34,40,39,"eventId"],[79,41,40,54],[79,43,40,56,"userId"],[79,49,40,71],[79,51,40,73],[80,4,41,2],[80,10,41,8,"q"],[80,11,41,9],[80,14,41,12,"userId"],[80,20,41,18],[80,23,41,21],[80,35,41,33,"encodeURIComponent"],[80,53,41,51],[80,54,41,52,"userId"],[80,60,41,58],[80,61,41,59],[80,63,41,61],[80,66,41,64],[80,68,41,66],[81,4,42,2],[81,11,42,9,"apiGet"],[81,17,42,15],[81,18,42,90],[81,33,42,105,"eventId"],[81,40,42,112],[81,52,42,124,"q"],[81,53,42,125],[81,55,42,127],[81,56,42,128],[82,2,43,0],[84,2,45,0],[85,2,46,7],[85,17,46,22,"attachPlayback"],[85,31,46,36,"attachPlayback"],[85,32,46,37,"streamId"],[85,40,46,53],[85,42,46,55,"playbackUrl"],[85,53,46,74],[85,55,46,76],[86,4,47,2],[86,11,47,9,"apiPost"],[86,18,47,16],[86,19,47,17],[86,35,47,33,"streamId"],[86,43,47,41],[86,61,47,59],[86,63,47,61,"undefined"],[86,72,47,70],[86,74,47,72],[87,6,48,4,"headers"],[87,13,48,11],[87,15,48,13],[88,8,48,15],[88,22,48,29],[88,24,48,31],[89,6,48,67],[89,7,48,68],[90,6,49,4,"body"],[90,10,49,8],[90,12,49,10,"JSON"],[90,16,49,14],[90,17,49,15,"stringify"],[90,26,49,24],[90,27,49,25],[91,8,49,27,"playback_url"],[91,20,49,39],[91,22,49,41,"playbackUrl"],[92,6,49,53],[92,7,49,54],[93,4,50,2],[93,5,50,10],[93,6,50,11],[94,2,51,0],[95,0,51,1],[95,3]],"functionMap":{"names":["<global>","buildUrl","apiGet","apiPost","followUser","unfollowUser","getFollowStatus","presenceWatch","presenceLeave","getEventPresence","attachPlayback"],"mappings":"AAA;ACG;CDG;OEE;CFI;OGE;CHS;OIG;CJE;OKC;CLE;OMC;CNE;OOG,gJP;OQC,gJR;OSC;CTG;OUG;CVK"},"hasCjsExports":false},"type":"js/module"}]}